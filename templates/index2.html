<!DOCTYPE html>
<html lang="en">
  <head>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/svg.select.js@3.0.1/dist/svg.select.min.css" />

    <style>
      .svg_select_points_rot {
        display: none;
      }

      .sly-smart-tool__annotation {
        opacity: 0.5;
      }

      .sly-smart-tool__point {
        stroke: white;
        stroke-width: 1px;
        /* fill: none; */
      }

      .sly-smart-tool__point:hover {
        cursor: pointer;
      }

      .sly-smart-tool__point.positive:hover {
        stroke: green;
      }

      .sly-smart-tool__point.negative:hover {
        stroke: red;
      }
    </style>
  </head>

  <body>
    <!-- <script src="https://cdn.jsdelivr.net/npm/@svgdotjs/svg.js@2.0/dist/svg.min.js"></script> -->
    <script src="https://cdn.jsdelivr.net/npm/svg.js@2.7.1/dist/svg.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/svg.select.js@3.0.1/dist/svg.select.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/svg.resize.js@1.4.3/dist/svg.resize.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/svg.draggable.js@2.2.2/dist/svg.draggable.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/svg.panzoom.js@1.2.3/dist/svg.panzoom.min.js"></script>
    <script src="https://rawgit.com/nodeca/pako/1.0.11/dist/pako.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/uuid/8.3.2/uuidv4.min.js"></script>

    <script src="https://cdn.jsdelivr.net/npm/vue@2.6.11/dist/vue.min.js"></script>
    <script src="./smarttool.js"></script>

    <div id="app"></div>
    
    <script>
      const app = new Vue({
        el: '#app',
        template: `
          <div>
            <!--
            <div>BBox: {{bbox}}</div>
            <div>Positive: {{positivePoints}}</div>
            <div>Negative: {{negativePoints}}</div>
            -->
            <div><button @click="toggle">Toggle</button></div>
            <smarttool-editor
              style="width: 400px; height: 400px;"
              :mask="mask"
              :image-url="imageUrl"
              :bbox.sync="bbox"
              @update:bbox="bbox = $event"
              :positive-points="positivePoints"
              @update:positive-points="positivePoints = $event"
              :negative-points="negativePoints"
              @update:negative-points="negativePoints = $event"
            />
          </div>
        `,
        data() {
          return {
            imageUrl: './images/lemon.jpeg',
            positivePoints: [{ position: [[729, 330]], id: 'e710fa8e-68b9-495c-b010-11ba03f24357' }],
            negativePoints: [{ position: [[579, 405]], id: 'efcb4892-81eb-4ac3-bfb0-d51909233c76' }, { position: [[ 889, 235 ]], id: 'aed5d235-e72f-4eca-b92a-0cf52af7f9fe' }],
            bbox: [[530, 200], [930, 460]],
            mask: null,
            masks: [
              {
                data: 'eJwBrAJT/YlQTkcNChoKAAAADUlIRFIAAADhAAAAxwEDAAAA1YimEgAAAAZQTFRFAAAA////pdmf3QAAAAF0Uk5TAEDm2GYAAAJUSURBVHicvdhdcqQgEAdwLB985AjcJBwNbxZust4gVO3DWhVj7zgZtYHuv05MwtNYv9HmS2ww5lYamo1ePFGvKxENKrY3HVW1N9UD38ISRU3DoknBZkGaQKX0wN1dt8CU/9l+XidWRVYPRyzw40F7PR5K2cXWe+uzIr/Yes/zP9NeWGcspee3rvUKpBRTPCwvEWraulkqI9RpGwSpzFDpUDtd+yO1UB1Uf0GDQiHXv9K9+oMJDcKioCNn2FUT7KoRaoIdGWFXGaQTmuv3Kalrghqhwndshm/RCLV82euwqs5QR6gD1Ai1h2qQzlAnqCPUAWqE2kM1lb7uP+da6yr/oIYvaHqoh+oq+aA9DbCVvjOt15x/tH9u6/XqjVj6Uekf2gZB0Ff+mQ9Cg/YUwQs6Qk2bOkEj1A2lhXI+q8ICzXIeYXFnqZjwYUhQh12FeReZhkp7pr5ShkJnca0anCVxVaXzBLCsVq5l4FzLwEVqWWiR8XqoReCUq811yLUY4mgQl9pAzdvUl+qhZrUuMatWnYVzrTN4rvXG4rymH9PhgsZK+SD1T2q9T8hKgOpPqrSNcp/fA13BvXZTafv2PSrtSLHu7396WvcBHi5ofFqbk9oLaq5oOKcSnlR57+5PqXwq4KCuk0M+ysC6To70y7pOjuEL2kA1WIM+6Q7Vg4lzpA6qhdqBSXekLdQGqsHqL6iDaqHeG6yezDVQ74F1tVA7qC3UBqq5ouGCeqjugtoL2kFtoTZQDdagHssuxUN14Cx5aXAC2oJT6qVJEahB59/GvOSX/wGbzAUWx6ApiAAAAABJRU5ErkJggvCIRHw=',
                origin: [550, 215],
                color: '#77e377',
              },
              {
                data: 'eJwBrANT/IlQTkcNChoKAAAADUlIRFIAAAF5AAAA7gEDAAAA5tnlMQAAAAZQTFRFAAAA////pdmf3QAAAAF0Uk5TAEDm2GYAAANUSURBVHic3dpNcqMwEAVgp7LwUkfgKDqaOBpH0RG09IJCiZOAJeif9+wilRlWM1X6xt39BPYUulw+r2u9Xagr1Tox699qrQsDrp+A+ohwB4UAsZI1pTuoI7z+7Wv9VpPfz/s3mJuPs+u7foP69ZdQ+8+zwLR9gNPS+o/Ojz/aVQ1VvrIGogLUqpIGZhZoeajrtdnqQJ7Umw7kti0g1vRuAHFOFqgSuFogCyBYQHr8mECqaTCBUFM0gTCnZAIhO3v9sSYraLEmM7f7RYN9TS7YZ2fujPu1vylcsB9scEFmQWHBLonBBZUGIwv6rqMPbixYWNB3nQAwsSCzYGbBwoIuOmR91zUECgtmFiwsaLvGwMSCwoIbCxYWVBo8uk4YyCy4sWBmwcKCSoNtN0UQTCzY5jqA4PY0CCCYWbAF4X+L/lzrXN0v9qfBGoT3a2a7MgsKecs9gkggmFmwBRFZMICg0mBNDt4ba3Jw1M8nl1gwgOD5ew7teksO7frxtARBfR4kEKx7A57rujfguW4A3X7rZoLnugG0620zoU3Qvx8aECHQ/C7D5vTSDzmophYE6CMagDXRAOyuGx8A2x00mJqazgH574HSgPSPgvZ/sfHvgeEUML8CwukAegrQYDkd8A8mGowPcNKTrAEnPclakBCQWVAaEE8Bv3uPBgT8whdvszew7Tq9ALDt2u4NCLRRJwTcWNAmF1kwIICO+n/7UYZF/RJILIgsGE4HgQVQ1C2Aon4JQHujBVDU7Xoo6g5Ef33/smNgQTgB9G+dgKj7NzxAcj0AkisdAJLLPUguGHsQuRb85A4vVYMDpj3wghj3wJvrfr03V+GcQTKB8HI7mkB4Qz+YoBxBMMFhqt5cj+vtDS4dfDCDkE4lmCALwExO6NlObpRANIC03kpOPrESdCAfuzGSk4+aGckVERhBZBEYQUwyiCoYZTCoQF6vd60esaKBVpN2XEqtST8iqICiAqWmrAJlO00qUHbHqAIlbH29fE+oU70ogzUPXkqgWGCghqTUZK2X5uQcojxm5xw2PWZXbHB8Yk4O2M/JPQe6b8I9L7tvIntg38TogsC1sK+p+KAP26+on5N1L4g1IRV12SEVXZpBYR9w2frGjwe/4x3/XFdpF30Ak2t5LPIjE8QAAAAASUVORK5CYIJfYaEq',
                origin: [549, 216],
                color: 'rgb(250, 205, 5)',
              }
            ],
          };
        },

        methods: {
          toggle() {
            this.curMaskIdx += 1;

            if (this.curMaskIdx >= this.masks.length) {
              this.curMaskIdx = 0;
            }

            this.mask = this.masks[this.curMaskIdx];


            let bboxSize = [[530, 200], [930, 460]];

            if (!this.isLargeBBox) {
              bboxSize = [[330, 100], [930, 660]]
            }

            this.isLargeBBox = !this.isLargeBBox;

            this.bbox = bboxSize;
          }
        },

        mounted() {
          this.curMaskIdx = 0;
          this.isLargeBBox = false;

          this.mask = this.masks[0];
        },
      });
    </script>
  </body>
</html>